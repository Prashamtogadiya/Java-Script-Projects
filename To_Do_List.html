<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>To-Do List</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
</head>

<body style="background-color: #1b2630; color: white;">
    <div class="container">
        <div class="text-center mt-5">
            <h1 class="display-5 mb-5"><b>To Do List</b></h1>
        </div>
        <div class="main row justify-content-center">
            <form class="row justify-content-center mb-5" onsubmit="return add()">
                <div class="col-12 col-lg-10 mb-3">
                    <label class="form-label">Enter Task</label>
                    <input type="text" class="form-control" id="todo" placeholder="Enter Your Task" required>
                </div>
                <div class="col-10">
                    <input type="submit" class="btn btn-success" id="submit" value="Submit">
                </div>
            </form>
            <div class="col-12 col-lg-10 mt-5" id="form">
            </div>
        </div>
    </div>

    <script>
        let editId = -1;
        let data = [];

        function add() {
            const tempObj = {
                task: document.getElementById('todo').value,
                complete: false 
            };
            for(i of data){
                if(tempObj.task==i.task){
                  alert("same data")
                  return false;
                }
            }
            if (editId >= 0) {
                data[editId] = tempObj;
                editId = -1;
                document.getElementById('submit').value = "Submit";
            } else {
                data.push(tempObj);
            }

            display();
            document.getElementById('todo').value = ''; 
            return false;
        }

        function display() {
            const temp = document.getElementById("form");
            let tempString = "";
            if (data.length !== 0) {
                tempString = '<table class="table table-dark table-striped"><thead><tr><th scope="col">Your Task</th><th scope="col">Action</th><th scope="col">Complete</th></tr></thead><tbody>';
                for (let i = 0; i < data.length; i++) {
                    tempString += "<tr>";
                    tempString += '<td id="task' + i + '" style="';
                    if (data[i].complete) {
                        tempString += 'text-decoration: line-through;';
                    }
                    tempString += '">' + data[i].task + '</td>';
                    tempString += '<td><button class="btn btn-sm btn-warning" onclick="edit(' + i + ')">Edit</button> ';
                    tempString += '<button class="btn btn-sm btn-danger" onclick="deleteData(' + i + ')">Delete</button></td>';
                    tempString += '<td><input id="comp' + i + '" class="form-check-input" type="checkbox" onclick="toggleLineThrough(' + i + ')" ' + (data[i].complete ? 'checked' : '') + '></td>';
                    tempString += "</tr>";
                }
                tempString += "</tbody></table>";
            } else {
                tempString = '<p>No tasks added yet.</p>';
            }
            temp.innerHTML = tempString;
        }

        function edit(id) {
            editId = id;
            document.getElementById('todo').value = data[editId].task;
            document.getElementById('submit').value = "Edit";
        }

        function deleteData(id) {
            data.splice(id, 1);
            display();
        }

        function toggleLineThrough(index) {
            data[index].complete = !data[index].complete; 

            const taskElement = document.getElementById('task' + index);
            if (data[index].complete) {
                taskElement.style.textDecoration = "line-through";
            } else {
                taskElement.style.textDecoration = "none";
            }

            display();
        }
    </script>
</body>

</html>


